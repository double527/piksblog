(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Editor"],{"49d7":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeIn",appear:"",mode:"out-in"}},[n("el-card",{staticClass:"blog-editor"},[n("h3",{staticClass:"blog-editor-title"},[t._v("标题")]),n("el-input",{ref:"title",staticClass:"blog-editor-input",attrs:{size:"medium",placeholder:"文章标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("h3",{staticClass:"blog-editor-title"},[t._v("内容")]),n("div",{attrs:{id:"blog-editor-textarea"}}),n("div",{staticClass:"blog-editor-tags"},[n("h3",{staticClass:"blog-editor-title"},[t._v("分类选择")]),n("el-radio-group",{model:{value:t.column,callback:function(e){t.column=e},expression:"column"}},t._l(t.columns,(function(e){return n("el-radio-button",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1)],1),n("div",{staticClass:"blog-editor-button"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitEditor}},[t._v("提交")]),n("el-button",{attrs:{type:"primary"},on:{click:t.cancelEditor}},[t._v("重置")])],1)],1)],1)},o=[],r=(n("d81d"),n("b0c0"),n("ac1f"),n("466d"),n("498a"),n("96cf"),n("1da1")),a=n("8eed"),c=n.n(a),s={name:"Editor",props:{columnId:{type:String}},data:function(){return{editor:null,title:"",content:"",columns:[],column:""}},created:function(){this.getColumns()},mounted:function(){var t=this,e=new c.a("#blog-editor-textarea");e.config.onchange=function(e){t.content=e},e.config.uploadImgServer="http://127.0.0.1:3000/upload/article",e.config.uploadImgMaxSize=5242880,e.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp"],e.config.uploadImgMaxLength=5,e.config.uploadFileName="file",e.config.uploadImgHeaders={Authorization:"Bearer ".concat(this.$store.state.token)},e.config.pasteFilterStyle=!1,e.create(),this.editor=e},methods:{getColumns:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api({type:"columns"});case 3:if(n=e.sent,t.columns=n.list.map((function(t){return{id:t.id,name:t.name}})),!t.columnId){e.next=8;break}return t.column=t.columnId,e.abrupt("return");case 8:t.column=t.columns[0].id,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},submitEditor:function(){this.validateEditor()&&this.postEditorData()},cancelEditor:function(){this.editor.txt.clear()},validateEditor:function(){return 0===this.title.trim().length?(this.$notify.error({title:"错误",message:"请填写标题"}),this.$refs.title.focus(),!1):0!==this.content.trim().length||(this.$notify.error({title:"错误",message:"内容不能为空"}),!1)},postEditorData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i={title:t.title,content:t.content,column:t.column,cover:(null===(n=t.content.match(/<img src="([^"']*)"/))||void 0===n?void 0:n[1])||void 0};try{t.$api({type:"postArticle",data:JSON.parse(JSON.stringify(i))}),t.$notify.success({title:"成功",message:"文章提交成功"}),t.$router.push("/index")}catch(o){t.$notify.error({title:"错误",message:"提交失败"})}case 2:case"end":return e.stop()}}),e)})))()}},beforeDestroy:function(){this.editor.destroy(),this.editor=null}},l=s,u=(n("6e01"),n("2877")),d=Object(u["a"])(l,i,o,!1,null,null,null);e["default"]=d.exports},"6e01":function(t,e,n){"use strict";n("a09a")},a09a:function(t,e,n){}}]);
//# sourceMappingURL=Editor.7883a036.js.map