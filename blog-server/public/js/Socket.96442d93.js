(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Socket"],{"10e0":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"blog-chat"},[i("div",{staticClass:"blog-chat--content"},t._l(t.chatList,(function(e){return i("div",{key:e.id,staticClass:"blog-chat--item",class:e.dis},[e.nikname?i("span",{staticClass:"blog-chat--nikname"},[t._v(t._s(e.nikname))]):t._e(),i("div",{class:["action"===e.type&&"notif","blog-chat--box"]},[e.time?i("span",{staticClass:"blog-chat--time"},[t._v(t._s(e.time))]):t._e(),e.msg?i("p",{staticClass:"blog-chat--msg"},[t._v(t._s(e.msg))]):t._e()])])})),0),i("div",{staticClass:"blog-chat--bottom"},[i("el-input",{attrs:{placeholder:"请输入内容"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendChat(e)}},model:{value:t.sendMsg,callback:function(e){t.sendMsg=e},expression:"sendMsg"}}),i("el-button",{attrs:{type:"primary"},on:{click:t.sendChat}},[t._v("发送消息")])],1),i("el-dialog",{attrs:{title:"欢迎聊天",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t._v(" 输入昵称: "),i("el-input",{model:{value:t.nikname,callback:function(e){t.nikname=e},expression:"nikname"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.enterChat}},[t._v("确 定")])],1)],1)],1)},s=[],a=(i("99af"),i("13d5"),i("4fad"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("3835"));function o(t){return String(t)[1]&&String(t)||"0"+t}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",i={y:t.getFullYear(),M:o(t.getMonth()+1),d:o(t.getDate()),h:o(t.getHours()),m:o(t.getMinutes()),s:o(t.getSeconds())};return Object.entries(i).reduce((function(t,e){var i=Object(a["a"])(e,2),n=i[0],s=i[1];return t.replace(new RegExp("".concat(n,"+"),"g"),s)}),e)}var c=r,d=i("8e27"),l=0,u={name:"Socket",data:function(){return{sendMsg:"",chatList:[],nikname:"",uid:"",ws:null,dialogVisible:!0}},created:function(){var t=this;this.$store.commit("RIGHT_LIVE2D_DIS"),this.$ws?(this.ws=this.$ws,this.getUserInfo(),this.ws.emit("enterChat",{uid:this.uid,nikname:this.nikname}),this.dialogVisible=!1):this.ws=Object(d["io"])("ws://127.0.0.1:8888",{transports:["websocket"]}),this.ws.on("chat",(function(e){t.serverChat(e)})),this.ws.on("logout",(function(e){t.serverLog({nikname:e,isLogin:!1})})),this.ws.on("logged",(function(e){t.serverLog({nikname:e,isLogin:!0})}))},beforeDestroy:function(){this.$store.commit("LEFT_LIVE2D_DIS"),this.ws.emit("leaveChat")},methods:{getUserInfo:function(){var t=this.$store.getters.userInfo,e=t.nikname,i=t._id;this.nikname=e,this.uid=i},enterChat:function(){this.ws.emit("enterChat",{nikname:this.nikname}),this.dialogVisible=!1},addChat:function(t){var e=t.type,i=void 0===e?"msg":e,n=t.msg,s=void 0===n?"":n,a=t.nikname,o=void 0===a?"":a,r=t.time,d=void 0===r?c():r,u=t.isMe,h=void 0!==u&&u,g="left";"action"===i&&(g="center"),h&&(g="right"),this.chatList.push({type:i,msg:s,nikname:o,time:d,isMe:h,dis:g,id:++l})},sendChat:function(){var t=this.sendMsg;this.addChat({isMe:!0,msg:t,nikname:this.nikname}),this.ws.emit("send",t),this.sendMsg=""},serverChat:function(t){var e=t.msg,i=void 0===e?"":e,n=t.nikname,s=void 0===n?"陌生人":n,a=t.time,o=void 0===a?"":a;this.addChat({nikname:s,msg:i,time:o})},serverLog:function(t){var e=t.nikname,i=t.isLogin,n=i?"进入":"离开",s="".concat(e," ").concat(n,"了聊天室");this.addChat({type:"action",msg:s})},submitEditor:function(){this.ws.emit("send",this.sendMsg)}}},h=u,g=(i("7dd2"),i("2877")),f=Object(g["a"])(h,n,s,!1,null,null,null);e["default"]=f.exports},"13d5":function(t,e,i){"use strict";var n=i("23e7"),s=i("d58f").left,a=i("a640"),o=i("ae40"),r=i("2d00"),c=i("605d"),d=a("reduce"),l=o("reduce",{1:0}),u=!c&&r>79&&r<83;n({target:"Array",proto:!0,forced:!d||!l||u},{reduce:function(t){return s(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"4d63":function(t,e,i){var n=i("83ab"),s=i("da84"),a=i("94ca"),o=i("7156"),r=i("9bf2").f,c=i("241c").f,d=i("44e7"),l=i("ad6d"),u=i("9f7f"),h=i("6eeb"),g=i("d039"),f=i("69f3").set,m=i("2626"),v=i("b622"),p=v("match"),k=s.RegExp,b=k.prototype,w=/a/g,y=/a/g,C=new k(w)!==w,_=u.UNSUPPORTED_Y,M=n&&a("RegExp",!C||_||g((function(){return y[p]=!1,k(w)!=w||k(y)==y||"/a/i"!=k(w,"i")})));if(M){var E=function(t,e){var i,n=this instanceof E,s=d(t),a=void 0===e;if(!n&&s&&t.constructor===E&&a)return t;C?s&&!a&&(t=t.source):t instanceof E&&(a&&(e=l.call(t)),t=t.source),_&&(i=!!e&&e.indexOf("y")>-1,i&&(e=e.replace(/y/g,"")));var r=o(C?new k(t,e):k(t,e),n?this:b,E);return _&&i&&f(r,{sticky:i}),r},L=function(t){t in E||r(E,t,{configurable:!0,get:function(){return k[t]},set:function(e){k[t]=e}})},x=c(k),D=0;while(x.length>D)L(x[D++]);b.constructor=E,E.prototype=b,h(s,"RegExp",E)}m("RegExp")},"7dd2":function(t,e,i){"use strict";i("e8d0")},e8d0:function(t,e,i){}}]);
//# sourceMappingURL=Socket.96442d93.js.map